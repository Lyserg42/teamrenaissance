<div class="container" xmlns="http://www.w3.org/1999/html">
    <h2>Mes prêts </h2>

    <div class="row">
        <div class="col-md-4">
            <select class="form-control" ng-model="selectFiltreTournois" ng-options="t for t in selectTournament">
                <p> {{t.tName}} </p>
            </select>
        </div>
    </div>

    <br> </br>

    <div class="form-group" ng-repeat="t in tournaments | filtreTournois : selectFiltreTournois">
        <button class="btn btn-outline-primary" type="button" ng-click="isCollapsed= !isCollapsed" title="voir mes prêts pour {{t.tName}}">
            <h5> {{t.tName}} du {{t.date}} </h5>
        </button>

        <br></br>
        <div id="collapseExample{{$index}}" uib-collapse="isCollapsed" >
            <h4 class="panel-title">
                <button class="btn btn-primary" type="button" ng-click="isCollapsed2= !isCollapsed2" data-target="#prets{{$index}}" title = "voir ce que je prête">
                    <h5> Je prête </h5>
                </button>
            </h4>


            <!--PRETS-->
            <div id="prets{{$index}}" uib-collapse="!isCollapsed2">
                <div id="lender" ng-repeat="l in t.lentCards">
                    <div class="row">
                        <div class="col-sm-9">
                            <a role= "button" class ="btn btn-outline-info" href="#!profil?uName={{l.uName}}">{{l.uName}}</a>
                            <div id="pret{{$parent.$index}}.{{$index}}">
                                <div ng-repeat="c in l.cards">
                                    <p> {{c.qty}} {{c.cName}} </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- <button type="button" class="btn" data-toggle="modal" data-target="#modalLent"
                            ng-click="orgLent($parent.$index,$index)"> Modifier
                    </button> -->
                    <button type="button" class="btn" ng-click="modification($parent.$index,$index,pret)"> Modifier </button>

                    <br> </br>
                </div>
            </div>

            <br> </br>


            <!--EMPRUNTS-->
            <h4 class="panel-title">
                <button class="btn btn-primary" type="button" ng-click="isCollapsed3= !isCollapsed3" data-target="#emprunt{{$index}}"  title = "voir ce que l'on me prête" >
                    <h5> On me prête </h5>
                </button>
            </h4>

            <div id="emprunt{{$index}}" uib-collapse="!isCollapsed3">
                <div ng-repeat="b in t.borrowedCards">
                    <div class="row">
                        <div class="col-sm-9">
                            <a role= "button" class ="btn btn-outline-info" href="#!profil?uName={{b.uName}}">{{b.uName}}</a>
                            <div id="emprunt{{$parent.$index}}.{{$index}}" >
                                <div ng-repeat="c in b.cards" >
                                    <p> {{c.qty}} {{c.cName}} </p>
                                </div>
                            </div>

                        </div>
                    </div>
                    <button type="button" class="btn" ng-click="modification($parent.$index,$index,emprunt)"> Modifier  </button>
                    <br> </br>
                </div>
            </div>
            <br> </br>


            <!--NEED-->
            <h4 class="panel-title">
                <button class="btn btn-primary " type="button"  ng-click="isCollapsed4= !isCollapsed4" data-target="#need{{$index}}"  title = "voir ce qu'il me manque">
                    <h5> Il me manque </h5>
                </button>
            </h4>

            <div id="need{{$index}}" uib-collapse="!isCollapsed4">
                <div ng-repeat="c in t.demands">
                    <p> {{c.qty}} {{c.cName}} </p>
                </div>
                <button class="btn" type="button" href="#!emprunter">Ajouter</button>
                <br> </br>
            </div>
            <br> </br>

        </div>
    </div>
    <div class="myModalParent"></div>
    <div class="modal-demo">
    <script type="text/ng-template" id="myModalContent.html">
        <div class="modal-header">
            <h3 class="modal-title" id="modal-title">Modifier</h3>
        </div>
        <div class="modal-body" id="modal-body">
            <form>
                <div ng-repeat="c in modal.cards">
                    <div class="row">
                        <div class="col-md-3">
                            <select class="form-control" ng-model="modifIds[$index].qty" ng-options="n for n in [] | range:c.qty+1">
                                {{$index}}
                            </select>
                        </div>
                        <div class="col-md-9">{{c.cName}}</div>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" type="button" ng-click="ok()">OK</button>
            <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
        </div>
    </script>
    </div>





</div>
